<head>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<style>
#start {
    font-size: 200px;
}

#cards-container {
    background-color: white;
    display: flex;
    height: 100%;
    justify-content: space-around;
}

.card {
    align-items: center;
    display: flex;
    flex-grow: 1;
    justify-content: center;
    margin: 50px;
}

.text {
    font-size: 100px;
}
</style>
</head>

<div id="content-container">
    <button id="start" onclick="start()">Start</button>
    <div id="cards-container">
        <button class="card" onclick="selected(1);"><span class="text"></span></button>
        <button class="card" onclick="selected(2);"><span class="text"></span></button>
    </div>
    <div id="reward-container">
        <div id="reward"></div>
    </div>
</div>

<script>
// Hide everything.
const $cardsContainer = $('#cards-container');
const $cards = $('.card');
const $start = $('#start');
const $rewardContainer = $('#reward-container');

$start.hide();
$cardsContainer.hide();
$rewardContainer.hide();

// Load player. Once loaded, show Start button.
let player;
function onYouTubeIframeAPIReady() {
    $start.show();
    player = new YT.Player('reward', {
        height: window.screen.height,
        playerVars: {
            controls: 0,
            modestbranding: 1,
            rel: 0,
        },
        videoId: 'r-EPjrfoYxk',
        width: window.screen.width,
    });
}

// Start button clicked.
function start() {
    $start.hide();
    $('#content-container').get(0).requestFullscreen();
    giveCards();
}

// Generate cards and prompt.
function giveCards() {
    $cardsContainer.show();
    $rewardContainer.hide();

    // TODO: Pick images from slide deck.
    // TODO: Randomize content shown.
    $cards.eq(0).find('span').text('MOM');
    $cards.eq(1).find('span').text('DAD');
    // TODO: Say which content to pick. Ex: Select mom.
}

// Handle card selection.
function selected(card) {
    if (card === 1) {
        $cardsContainer.hide();
        $rewardContainer.show();
        player.playVideo();
        setTimeout(function() {
            player.pauseVideo();
            giveCards();
        }, 10000);
    }
    else {
        // TODO: Give explanation. Ex: That's not mom.
    }
}
</script>